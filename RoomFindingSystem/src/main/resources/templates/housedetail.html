<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="ThemeStarz">


    <link href="/assets/fonts/font-awesome.css" rel="stylesheet" type="text/css">
    <link href="/assets/fonts/elegant-fonts.css" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,700,900,400italic' rel='stylesheet'
          type='text/css'>
    <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/zabuto_calendar.min.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/owl.carousel.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/style.css" type="text/css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

    <style>
        .mySlides {
            display: none;
        }
        .round-image {
            width: 50px; /* Đặt kích thước bất kỳ tùy theo nhu cầu của bạn */
            height: 50px; /* Đặt kích thước bất kỳ tùy theo nhu cầu của bạn */
            border-radius: 50%; /* Đặt bán kính bo góc thành 50% (hình tròn) */
            overflow: hidden; /* Ẩn các phần nằm ngoài phạm vi của hình tròn */
        }
        .round-image img {
            width: 100%; /* Đảm bảo bức ảnh luôn kích thước bằng với phần bọc */
            height: auto; /* Để tỷ lệ khung hình không bị thay đổi */
        }
        h4{
            font-weight: bold
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .star{
            font-size: 19px;
        }

        .one {
            color: red;
        }

        .two {
            color: orangered;
        }

        .three {
            color: darkorange;
        }

        .four {
            color: orange;
        }

        .five {
            color: #FFCE45;
        }


        .filter-container {
            display: flex;
            justify-content: flex-end;
            align-items: center; /* Căn giữa theo chiều dọc nếu cần */
        }

        /* Điều chỉnh độ rộng nếu cần thiết */
        .filter-container span {
            margin-right: 10px; /* Điều chỉnh khoảng cách giữa các phần tử */
        }

         body {
             font-family: 'Arial', sans-serif;
         }

    </style>

    <title>Xem chi tiết nhà trọ</title>

</head>

<body>
<div class="page-wrapper">
    <div th:replace="~{header :: headerSection}"></div>
    <!--end page-header-->

    <div id="page-content">
        <div class="container" th:each="HousesEntity : ${HousesEntity}">
            <ol class="breadcrumb">
                <li><a th:href="@{/}">Trang chủ</a></li>

                <li><a th:href="@{houselist}">Danh sách trọ</a></li>
                <li class="active">Chi Tiết</li>
            </ol>
            <!--end breadcrumb-->
            <div class="row">
                <div class="col-md-3 col-sm-4">
                    <div class="sidebar">
                        <div class="box filter">

                            <aside>
                                <address>
                                    <strong >Tên Chủ Trọ</strong><br>
                                    <div >
                                        <p style="display: inline-block"th:text="${HousesEntity.firstName}" ></p>
                                        <p style="display: inline-block" th:text="${HousesEntity.lastName}"></p>
                                    </div>

                                    <strong>Điện Thoại Liên Hệ:</strong>
                                    <p th:text="${HousesEntity.phone}"></p>
                                </address>
                            </aside>
                            <!--end form-group-inline-->
                            <div class="center">
                                <a href="#filter-advanced-search" class="link icon" data-toggle="collapse"
                                   aria-expanded="false" aria-controls="filter-advanced-search">Xem Chi Tiết Dịch Vụ<i
                                        class="fa fa-plus"></i></a>
                            </div>
                            <div class="collapse" id="filter-advanced-search">
                                <div class="wrapper">
                                    <h3>Dịch vụ Trọ bao gồm:</h3>
                                    <section th:each="HouseService : ${HouseService}">

                                        <ul class="checkboxes list-unstyled">
                                            <li th:text="${HouseService.description}"></li>
                                        </ul>
                                        <!--end checkboxes-->
                                    </section>
                                    <!--end section-->
                                    <!--                                        <section>-->
                                    <!--                                            <h3>Property Type </h3>-->
                                    <!--                                            <ul class="checkboxes">-->
                                    <!--                                                <li><label><input type="checkbox" name="hotel">Apartmets<span>67</span></label>-->
                                    <!--                                                </li>-->
                                    <!--                                                <li><label><input type="checkbox" name="apartment">Hotels<span>31</span></label>-->
                                    <!--                                                </li>-->
                                    <!--                                                <li><label><input type="checkbox"-->
                                    <!--                                                                  name="breakfast-only">Boats<span>68</span></label>-->
                                    <!--                                                </li>-->
                                    <!--                                                <li><label><input type="checkbox"-->
                                    <!--                                                                  name="spa-wellness">Villas<span>52</span></label></li>-->
                                    <!--                                            </ul>-->
                                    <!--                                            <div class="collapse" id="all-property-types">-->
                                    <!--                                                <ul class="checkboxes">-->
                                    <!--                                                    <li><label><input type="checkbox" name="ski-center">Ski Center<span>67</span></label>-->
                                    <!--                                                    </li>-->
                                    <!--                                                    <li><label><input type="checkbox"-->
                                    <!--                                                                      name="cottage">Cottage<span>31</span></label></li>-->
                                    <!--                                                    <li><label><input type="checkbox"-->
                                    <!--                                                                      name="hostel">Hostel<span>68</span></label></li>-->
                                    <!--                                                    <li><label><input type="checkbox"-->
                                    <!--                                                                      name="boat">Boat<span>52</span></label></li>-->
                                    <!--                                                </ul>-->
                                    <!--                                            </div>-->
                                    <!--                                            &lt;!&ndash;end checkboxes&ndash;&gt;-->
                                    <!--                                            <a href="#all-property-types" class="link" data-toggle="collapse"-->
                                    <!--                                               aria-expanded="false" aria-controls="all-property-types">Show all</a>-->
                                    <!--                                        </section>-->
                                    <!--end section-->
                                    <!--                                        <section>-->
                                    <!--                                            <h3>Property Facility</h3>-->
                                    <!--                                            <ul class="checkboxes no-bottom-margin">-->
                                    <!--                                                <li><label><input type="checkbox"-->
                                    <!--                                                                  name="wi-fi">Wi-fi<span>12</span></label></li>-->
                                    <!--                                                <li><label><input type="checkbox" name="free-parking">Free Parking<span>48</span></label>-->
                                    <!--                                                </li>-->
                                    <!--                                                <li><label><input type="checkbox" name="airport">Airport-->
                                    <!--                                                    Shuttle<span>36</span></label></li>-->
                                    <!--                                                <li><label><input type="checkbox" name="family-rooms">Family Rooms<span>56</span></label>-->
                                    <!--                                                </li>-->
                                    <!--                                            </ul>-->
                                    <!--                                            &lt;!&ndash;end checkboxes&ndash;&gt;-->
                                    <!--                                        </section>-->
                                    <!--end section-->
                                </div>

                                <!--end filter-advanced-search-->
                            </div>
                            <!--end collapse-->
                            <div class="form-group center">
                                <button type="submit" class="btn btn-primary btn-rounded form-control">Liên Hệ
                                </button>
                            </div>
                            </form>
                            <!--end form-filter-->
                        </div>
                        <!--end filter-->
                        <div class="box">
                            <!--                            <h2>Weather in Destination</h2>-->
                            <!--                            <div id="weather" class="weather weather-detail"></div>-->
                            <!--end weather-->
                        </div>
                        <!--end box-->
                        <!--                        <a href="#" class="advertising-banner">-->
                        <!--                            <span class="banner-badge">Advertising</span>-->
                        <!--                            <img src="assets/img/ad-banner-02.jpg" alt="">-->
                        <!--                        </a>-->
                    </div>
                    <!--end sidebar-->
                </div>
                <!--end col-md-3-->
                <div class="col-md-9 col-sm-8">
                    <div class="quick-navigation" data-fixed-after-touch="">
                        <div class="wrapper">
                            <ul>
                                <li><a href="#description" class="scroll">Miêu tả chi tiết</a></li>
                                <li><a href="#map" class="scroll">Bản đồ</a></li>
                                <li><a href="#facilities" class="scroll">Facilities</a></li>
                                <li><a href="#additional-information" class="scroll">Thêm Thông Tin</a></li>
                                <li><a href="#reviews" class="scroll">Đánh giá</a></li>
                                <li></li>
                            </ul>
                        </div>
                    </div>


                    <div class="main-content">
                        <div class="title">
                            <div class="left">
                                <!--                                <h1 th:text="*{houseName}" >Mountain Paradise<span class="rating"><i class="fa fa-star"></i>9.9</span></h1>-->


                            </div>
                            <div class="right">
                                <a href="#map" class="icon scroll"><i class="fa fa-map-marker"></i>Tìm Trên Bản Đồ</a>
                                <a href="#availability" class="btn btn-primary btn-rounded scroll">Danh sách Phòng</a>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-6 col-sm-6">
                                <h2 th:text="${HousesEntity.houseName}" style="display: inline-block;"></h2>
                                <a href="#reviews" style="display: inline-block; margin-left: 10px;">
                                    <span th:text="'(Đánh giá: ' + ${HousesEntity.star} + ' '"></span><i class="fa fa-star" style="color: #FFCE45"></i><span>)</span>
                                </a>
                            </div>


                            <div class="col-md-6 col-sm-6 text-right" th:if="${session.user != null}"> <!-- Chia cột, dính về bên phải -->
                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#reportModalCenter" style="background-color: red" th:if="${checkReport==1}">
                                    <i class="fa fa-flag" style="color: #FFFFFF"></i><span style="color: #FFFFFF" th:if="${checkReport==1}">  Báo cáo</span>
                                </button>

                                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#reportModalCenter" style="background-color: grey" th:if="${checkReport==0}">
                                    <i class="fa fa-flag" style="color: #FFFFFF"></i><span style="color: #FFFFFF" > Chờ xử lý báo cáo</span>
                                </button>

                            </div>
                            <div th:if="${session.user != null}" class="modal fade" id="reportModalCenter" tabindex="-1" role="dialog" aria-labelledby="reportModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="comment-title">
                                                <h4>Gửi báo cáo</h4>
                                            </div>
                                            <form class="labels-uppercase clearfix"  th:object="${reportEntity}" th:action="@{/report}" method="post">
                                                <div class="review write">
                                                    <div class="comment" style="margin-top: 10px">

                                                        <!--end title-->
                                                        <div class="form-group">
                                                            <label>Tiêu đề:<em style="color: red">*</em></label>
                                                            <input type="text" class="form-control"
                                                                   name="name" placeholder="Viết tiêu đề ở đây" required=""
                                                                   th:field="*{title}">
                                                            <!--                                                            <select name="name" id="cars" name="name" th:field="*{title}">-->
                                                            <!--                                                                <option value="Hình ảnh, thông tin không đúng thực tế">Hình ảnh, thông tin không đúng thực tế</option>-->
                                                            <!--                                                                <option value="Giá nhà trọ quá cao so với chất lượng">Giá nhà trọ quá cao so với chất lượng</option>-->
                                                            <!--                                                                <option value="Chủ nhà không có thiện chí">Chủ nhà không có thiện chí</option>-->
                                                            <!--                                                                <option value="Khác">Khác</option>-->
                                                            <!--                                                            </select>-->
                                                        </div>
                                                        <div class="form-group">
                                                            <label>Mô tả<em style="color: red">*</em></label>
                                                            <textarea class="form-control"  rows="8"
                                                                      name="answer" required="" placeholder="Viết mô tả ở đây"
                                                                      th:field="*{reportDescription}" ></textarea>
                                                        </div>
                                                        <!--end form-group-->
                                                    </div>
                                                    <!--end comment-->
                                                </div>
                                                <input type="hidden" th:field="*{userid}">
                                                <input type="hidden" th:field="*{houseid}">
                                                <div class="modal-footer" style="border-top: 0px">
                                                    <!--                                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                                                    <a th:href="@{deleteReport(houseId=*{houseid})}"><button type="button" class="btn btn-secondary">Xóa</button></a>
                                                    <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                                                </div>
                                                <!--end review-->
                                            </form>
                                        </div>
                                        <!--                                        <div class="modal-footer" style="border-top: 0px">-->
                                        <!--                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                                        <!--                                            <button type="submit" class="btn btn-primary">Save changes</button>-->
                                        <!--                                        </div>-->
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="one-item-carousel" >
                            <!-- Carousel container -->
                            <section id="gallery" th:each="HousesImages : ${HousesImages}">
                                <div class="gallery-detail" >
                                    <!--                                    <div class="ribbon"><div class="offer-number">20%</div><figure>Off Today!</figure></div>-->
                                    <div class="one-item-carousel">
                                        <div class="image" >

                                            <img width="847" height="501" th:src="${HousesImages.houseImagesEntities}" alt="">
                                        </div>

                                    </div>
                                </div>
                            </section>
                            <!--                            end title-->

                        </div>

                        <!--                        <p th:text="${HousesEntity.houseImagesEntities}"></p>-->
                        <!--                        <img th:src="${HousesEntity.houseImagesEntities}" alt="">-->
                        <div class="row" th:object="${HousesEntity}">
                            <div class="col-md-8">
                                <section id="description">
                                    <h3 style="color: rgba(31, 31, 31, 0.8);" th:text="${HousesEntity.description}">Spend Great Time in Our Hotel!</h3>
                                </section>
                                <section id="facilities">
                                    <h2>Dịch Vụ</h2>
                                    <ul class="bullets half" th:each="HouseService : ${HouseService}">
                                        <!--                                        th:text="${HousesEntity.serviceName}"-->
                                        <!--                                        th:text="${HousesEntity.serviceName}"-->
                                        <li  th:text="${HouseService.serviceName}" >Sauna</li>
                                        <!--                                        <li>Fireplace or fire pit</li>-->
                                        <!--                                        <li>Outdoor Kitchen</li>-->
                                        <!--                                        <li>-->
                                        <!--                                            <div><img th:src="@{img/logo.jpeg}" alt=""></div>-->
                                        <!--                                        </li>-->
                                        <!--                                        <li>Trees and Landscaping</li>-->
                                        <!--                                        <li>Sun Room</li>-->
                                        <!--                                        <li>Family Room</li>-->
                                        <!--                                        <li>Concrete Flooring</li>-->
                                    </ul>
                                </section>

                                <!--                                                                <section id="map">-->
                                <!--                                                                    <h2>Map</h2>-->
                                <!--                                                                    <div id="map-item" class="map height-300 box"></div>-->
                                <div id="map" th:if="${houseLocation.latitude == null || houseLocation.longitude== null }">
                                    <h2>Map</h2>
                                    <span>Nhà trọ chưa cập nhật vị trí trên google map</span>
                                </div>
                                <div th:if="${houseLocation.latitude != null && houseLocation.longitude != null }">
                                    <section id="map">
                                        <h2>Map</h2>
                                        <div id="map-item" class="map height-300 box"></div>
                                        <input id="latitude" type="hidden" th:value="${houseLocation.latitude}">
                                        <input id="longitude" type="hidden" th:value="${houseLocation.longitude}">
                                    </section>
                                </div>

                            </div>
                            <!--end col-md-8-->
                            <div class="col-md-4">
                                <div class="sidebar">
                                    <aside class="box">
                                        <h3><strong> Loại nhà trọ:</strong></h3>
                                        <dl th:text="${HousesEntity.typeName}">

                                        </dl>
                                    </aside>
                                    <aside class="box">
                                        <h3><strong> Địa Chỉ Nhà Trọ:</strong></h3>
                                        <p>cụ thể: </p> <dl th:text="${HousesEntity.addressDetail}"></dl>
                                        <p>Xã: </p>  <dl th:text="${HousesEntity.ward}"></dl>
                                        <p>Huyện: </p>  <dl th:text="${HousesEntity.district}"></dl>
                                        <p>(Thành Phố / Tỉnh)</p> <dl th:text="${HousesEntity.province}">
                                    </dl>
                                    </aside>

                                </div>
                                <!--end sidebar-->
                            </div>
                            <!--end col-md-4-->
                        </div>
                        <!--end row-->
                        <section>
                            <div><h2 style="display: inline-block ">Tại sao chọn</h2>  <strong><u> <h2 style="display: inline-block " th:text="${HousesEntity.houseName}"></h2></u></strong></div>
                            <div class="row">
                                <div class="col-md-4 col-sm-4">
                                    <div class="feature">
                                        <aside class="circle">
                                            <i class="icon_box-checked"></i>
                                        </aside>
                                        <figure>
                                            <h3>200+ Reviews</h3>
                                        </figure>
                                    </div>
                                    <!--end feature-->
                                </div>
                                <!--end col-md-4-->
                                <div class="col-md-4 col-sm-4">
                                    <div class="feature">
                                        <aside class="circle">
                                            <i class="icon_box-checked"></i>
                                        </aside>
                                        <figure>
                                            <h3>Low Prices</h3>
                                        </figure>
                                    </div>
                                    <!--end feature-->
                                </div>
                                <!--end col-md-4-->
                                <div class="col-md-4 col-sm-4">
                                    <div class="feature">
                                        <aside class="circle">
                                            <i class="icon_box-checked"></i>
                                        </aside>
                                        <figure>
                                            <h3>Great Position</h3>
                                        </figure>
                                    </div>
                                    <!--end feature-->
                                </div>
                                <!--end col-md-4-->
                            </div>
                            <!--end row-->
                        </section>
                        <section id="availability">

                            <!--                            <h2>Availability</h2>-->
                            <!--                            <form class="labels-uppercase" id="form-availability">-->
                            <!--                                <div class="row">-->
                            <!--                                    <div class="col-md-3">-->
                            <!--                                        <div class="form-group">-->
                            <!--                                            <label for="form-availability-check-in">Check In</label>-->
                            <!--                                            <input type="text" class="form-control date" id="form-availability-check-in"-->
                            <!--                                                   name="check-in" placeholder="Check In">-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->
                            <!--                                    &lt;!&ndash;end col-md-3&ndash;&gt;-->
                            <!--                                    <div class="col-md-3">-->
                            <!--                                        <div class="form-group">-->
                            <!--                                            <label for="form-availability-check-out">Check In</label>-->
                            <!--                                            <input type="text" class="form-control date"-->
                            <!--                                                   id="form-availability-check-out" name="check-out"-->
                            <!--                                                   placeholder="Check In">-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->
                            <!--                                    &lt;!&ndash;end col-md-3&ndash;&gt;-->
                            <!--                                    <div class="col-md-3">-->
                            <!--                                        <div class="form-group">-->
                            <!--                                            <label class="invisible">Hidden label</label>-->
                            <!--                                            <button type="submit"-->
                            <!--                                                    class="btn btn-primary btn-rounded btn-framed form-control">Search-->
                            <!--                                            </button>-->
                            <!--                                        </div>-->
                            <!--                                    </div>-->
                            <!--                                    &lt;!&ndash;end col-md-3&ndash;&gt;-->
                            <!--                                </div>-->
                            <!--                                &lt;!&ndash;end row&ndash;&gt;-->
                            <!--                            </form>-->

                            <div class="form-reservations">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                        <tr>
                                            <th>Loại phòng</th>

                                            <!--                                            <th>Persons</th>-->
                                            <th>Giá tiền</th>
                                            <th>Phòng</th>
                                            <th></th>
                                        </tr>
                                        </thead>
                                    </table>
                                </div>
<!--                                <form th:each="room: ${roomList}" th:action="@{'/room/' + ${room.roomId}}" >-->
                                    <form th:each="room: ${roomList}" th:action="@{/room/houseDetail}" method="post">
                                    <table class="table">
                                        <tbody>
                                        <tr class="room">
                                            <td class="room-type">
                                                <a href="" th:text="${room.typeName}"><h3></h3>

                                                    <!--                                                    <figure class="label label-danger">1 Room Left!</figure>-->
                                                </a>

                                                <ul th:each="service: ${room.serviceList}">
                                                    <li><span th:text="${service}"></span></li>
                                                </ul>
                                            </td>

                                            <!--                                            <td class="persons">2<i class="fa fa-user"></i></td>-->
                                            <td th:text="${room.price}" ></td>

                                            <td class="rooms">
                                                <select name="roomId" class="framed">
                                                    <option  th:each="id : ${room.roomList}" th:value="${id}" th:text="${roomService.getRoomNameById(id)}" ></option>

                                                </select>
                                            </td>
                                            <td>
                                                <div  class="form-group">
                                                    <button type="submit" class="btn btn-primary btn-rounded">Xem chi tiết</button>
                                                </div>
                                                <!--end form-group-->
                                            </td>
                                        </tr>
                                        <!--end tr.room-->
                                        </tbody>
                                    </table>
                                    <!--end table-->
                                </form>

                            </div>
                            <!--end form-reservations-->
                        </section>
                        <section id="reviews">
                            <div class="title">
                                <h2 class="pull-left">Đánh giá</h2>
                                <div th:if="${session.user != null}">
                                    <a  class="btn btn-primary btn-rounded pull-right scroll" type="button"  data-toggle="modal" data-target="#exampleModal" th:if="${count == 0}">Viết đánh giá</a>
                                </div>


                            </div>
                            <div class="filter-container">
                                <span style="margin-right: 10px">Lọc theo sao:</span>
                                <form th:action="@{/detail#reviews}" th:method="get" id="filterForm">
                                    <select name="star" class="framed" onchange="submitForm()" style="width: 70px">
                                        <option value="0">Tất cả</option>
                                        <option value="1" th:selected="${star==1}">1 sao</option>
                                        <option value="2" th:selected="${star==2}">2 sao</option>
                                        <option value="3" th:selected="${star==3}">3 sao</option>
                                        <option value="4" th:selected="${star==4}">4 sao</option>
                                        <option value="5" th:selected="${star==5}">5 sao</option>
                                    </select>
                                    <input name="id" th:value="${HousesEntity.getHouseId}" hidden="">
                                    <!-- Thêm một nút submit ẩn để có thể gửi form khi cần thiết -->
                                    <button type="submit" style="display:none;"></button>
                                </form>
                            </div>


                            <div class="reviews">

                                <div th:each="feedback: ${feedbacks}">
                                    <div class="review">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <div class="row">
                                                    <div class="col-md-3 col-xs-2">
                                                        <img class="round-image" th:src="${feedback.getUserImage()}" style="margin-top: 15px; border-right: 10px">
                                                    </div>
                                                    <div class="col-md-9 col-xs-10" >
                                                        <aside class="name" th:text="${feedback.getUserFistName()}+ ' ' +${feedback.getUserLastName()}"></aside>
                                                        <!--                                                        <aside class="date" th:text="${#dates.format(feedback.getCreatedDate(), 'yyyy-MM-dd')}"></aside>-->
                                                        <aside class="date" th:text="${#temporals.format(feedback.getCreatedDate(), 'dd-MM-yyyy')}"></aside>



                                                    </div>
                                                </div>
                                            </div>
                                            <!--end col-md-3-->
                                            <div class="col-md-9">
                                                <div class="comment">
                                                    <div class="comment-title" style="display: flex; justify-content: space-between; align-items: center; ">
                                                        <h4 style="font-weight: bold" th:text="${feedback.getTitle()}"></h4>

                                                        <!-- Trong ví dụ này, chúng tôi sử dụng Thymeleaf để hiển thị hoặc ẩn nút dựa trên điều kiện -->
                                                        <div th:if="${session.user != null}">
                                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" style="background-color: #FFFFFF" th:if="${feedback.getUserId()} == ${user.getUserId()}">
                                                                <i class="fa fa-edit" style="margin-bottom: 16px; font-size: 21px; color: #0f0f0f"></i>
                                                            </button>
                                                            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                <div class="modal-dialog" role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title" id="exampleModalLabel">Chỉnh sửa đánh giá</h5>
                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                <span aria-hidden="true">&times;</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <form class="labels-uppercase clearfix"  th:object="${feedbackEntity}" th:action="@{/detail}" method="post">
                                                                                <!--                                <div class="alert alert-dark fade in center" role="alert">-->
                                                                                <!--                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"-->
                                                                                <!--                                            data-switch="#review-write">-->
                                                                                <!--                                        <span aria-hidden="true">&times;</span>-->
                                                                                <!--                                    </button>-->
                                                                                <!--                                    <span class="sr-only">Error:</span>-->
                                                                                <!--                                    <a href="#tab-sign-in" data-toggle="modal" data-tab="true"-->
                                                                                <!--                                       data-target="#sign-in-register-modal">Xin mời đăng nhập để đánh giá</a>-->
                                                                                <!--                                </div>-->
                                                                                <div class="review write" >
                                                                                    <span class="name">Tên người dùng: </span><span th:text="${user.getFirstName()}"></span><span> </span><span th:text="${user.getLastName()}"></span>


                                                                                    <div class="comment" style="margin-top: 10px">
                                                                                        <div class="comment-title">
                                                                                            <h4>Đánh giá về khu trọ</h4>
                                                                                        </div>
                                                                                        <!--end title-->
                                                                                        <div class="form-group">
                                                                                            <label>Tiêu đề đánh giá<em>*</em></label>
                                                                                            <input type="text" class="form-control"
                                                                                                   name="name" placeholder="Viết tiêu đề ở đây" required=""
                                                                                                   th:field="*{title}">
                                                                                        </div>
                                                                                        <div class="form-group">
                                                                                            <label>Mô tả<em>*</em></label>
                                                                                            <textarea class="form-control"  rows="8"
                                                                                                      name="answer" required="" placeholder="Viết mô tả ở đây"
                                                                                                      th:field="*{content}"></textarea>
                                                                                        </div>
                                                                                        <!--end title-->
                                                                                        <div class="comment-title">
                                                                                            <h4>Đánh giá: </h4>
                                                                                            <input type="text" id="ratingInput1" hidden="" oninput="updateRating(1, this.value)" th:field="*{star}" th:value="5">
                                                                                            <span onclick="gfg(1, 1)" class="star">★</span>
                                                                                            <span onclick="gfg(2, 1)" class="star">★</span>
                                                                                            <span onclick="gfg(3, 1)" class="star">★</span>
                                                                                            <span onclick="gfg(4, 1)" class="star">★</span>
                                                                                            <span onclick="gfg(5, 1)" class="star">★</span>
                                                                                        </div>

                                                                                        <!--end form-group-->
                                                                                        <div class="form-group pull-right">
                                                                                            <button type="submit" class="btn btn-primary btn-rounded">Gửi đánh giá
                                                                                            </button>
                                                                                            <a th:href="@{deleteHouseCmt(houseId=*{houseId})}"><button class="btn btn-primary btn-rounded" type="button" style="background-color: red">Xóa
                                                                                            </button></a>
                                                                                        </div>

                                                                                        <!--end form-group-->
                                                                                        <!--end col-md-4-->
                                                                                        <!--end row-->
                                                                                    </div>
                                                                                    <!--end comment-->
                                                                                </div>
                                                                                <input type="hidden" th:field="*{memberId}">
                                                                                <input type="hidden" th:field="*{houseId}">
                                                                                <!--end review-->
                                                                            </form>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>


                                                    <!--end title-->
                                                    <p th:text="${feedback.getContent()}"></p>
                                                    <div class="clearfix options">
                                                    <span class="pull-left"><span>Đánh giá: </span><span th:text="${feedback.getStar()}" >  </span><span style="color: #FFCE45"><i class="fa fa-star"></i></span></span>
                                                    <span class="pull-right"></span>

                                                    </div>
                                                    <!--end options-->
                                                    <!--                                                    <div class="answer">-->
                                                    <!--                                                        <h4>James Green, CEO of the Mountain Paradise Hotel</h4>-->
                                                    <!--                                                        <p>Phasellus venenatis vel orci et lacinia. Duis sollicitudin arcu-->
                                                    <!--                                                            et hendrerit-->
                                                    <!--                                                            tempor. Aliquam at urna fringilla, auctor tellus eget, vehicula-->
                                                    <!--                                                            lorem.-->
                                                    <!--                                                            Pellentesque ornare faucibus sapien eget max-->
                                                    <!--                                                        </p>-->
                                                    <!--                                                    </div>-->
                                                    <!--end answer-->
                                                </div>
                                                <!--end comment-->
                                            </div>
                                            <!--end col-md-9-->
                                        </div>
                                        <!--end row-->
                                    </div>
                                </div>

                            </div>
                            <!--end reviews-->
                        </section>
<!--                        <div th:if="${session.user != null}">-->
<!--                            <section id="write-a-review" th:if="${count == 0}">-->
<!--                                <h2>Viết đánh giá</h2>-->
<!--                                <form class="labels-uppercase clearfix" id="form_reply_1" th:object="${feedbackEntity}" th:action="@{/detail}" method="post">-->
<!--                                    &lt;!&ndash;                                <div class="alert alert-dark fade in center" role="alert">&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close"&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                            data-switch="#review-write">&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                        <span aria-hidden="true">&times;</span>&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                    </button>&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                    <span class="sr-only">Error:</span>&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                    <a href="#tab-sign-in" data-toggle="modal" data-tab="true"&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                       data-target="#sign-in-register-modal">Xin mời đăng nhập để đánh giá</a>&ndash;&gt;-->
<!--                                    &lt;!&ndash;                                </div>&ndash;&gt;-->
<!--                                    <div class="review write" id="review-write">-->
<!--                                        <span class="name">Tên người dùng: </span><span th:text="${user.getFirstName()}"></span><span> </span><span th:text="${user.getLastName()}"></span>-->


<!--                                        <div class="comment" style="margin-top: 10px">-->
<!--                                            <div class="comment-title">-->
<!--                                                <h4>Đánh giá về khu trọ</h4>-->
<!--                                            </div>-->
<!--                                            &lt;!&ndash;end title&ndash;&gt;-->
<!--                                            <div class="form-group">-->
<!--                                                <label for="form_reply_1-name">Tiêu đề đánh giá<em style="color: red">*</em></label>-->
<!--                                                <input type="text" class="form-control" id="form_reply_1-name"-->
<!--                                                       name="name" placeholder="Viết tiêu đề ở đây" required=""-->
<!--                                                       th:field="*{title}" pattern=".{20,}" title="Yêu cầu ít nhất 20 ký tự">-->
<!--                                            </div>-->
<!--                                            <div class="form-group">-->
<!--                                                <label for="form_reply_1-message">Mô tả<em style="color: red">*</em></label>-->
<!--                                                <textarea class="form-control" id="form_reply_1-message" rows="8"-->
<!--                                                          name="answer" required="" placeholder="Viết mô tả ở đây"-->
<!--                                                          th:field="*{content}" pattern=".{20,}" title="Yêu cầu ít nhất 20 ký tự"></textarea>-->
<!--                                            </div>-->


<!--&lt;!&ndash;                                            <div class="comment-title">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <h4>Đánh giá: </h4>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <input type="text" id="ratingInput1" hidden="" oninput="updateRating(1, this.value)" th:field="*{star}">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(1, 1)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(2, 1)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(3, 1)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(4, 1)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(5, 1)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->
<!--&lt;!&ndash;                                            <div class="comment-title">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <h4>Đánh giá: </h4>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <input type="text" id="ratingInput2" hidden="" oninput="updateRating(2, this.value)" th:value="5" th:field="*{star}">&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(1, 2)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(2, 2)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(3, 2)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(4, 2)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                                <span onclick="gfg(5, 2)" class="star">★</span>&ndash;&gt;-->
<!--&lt;!&ndash;                                            </div>&ndash;&gt;-->


<!--                                            <div class="form-group pull-right">-->
<!--                                                <button type="submit" class="btn btn-primary btn-rounded">Gửi đánh giá-->
<!--                                                </button>-->
<!--                                            </div>-->

<!--                                            &lt;!&ndash;end form-group&ndash;&gt;-->
<!--                                            &lt;!&ndash;end col-md-4&ndash;&gt;-->
<!--                                            &lt;!&ndash;end row&ndash;&gt;-->
<!--                                        </div>-->
<!--                                        &lt;!&ndash;end comment&ndash;&gt;-->
<!--                                    </div>-->
<!--                                    <input type="hidden" th:field="*{memberId}">-->
<!--                                    <input type="hidden" th:field="*{houseId}">-->
<!--                                    &lt;!&ndash;end review&ndash;&gt;-->
<!--                                </form>-->
<!--                                &lt;!&ndash;end form&ndash;&gt;-->
<!--                            </section>-->
<!--                        </div>-->

                    </div>
                    <!--end main-content-->
                </div>
                <!--end col-md-9-->
            </div>
            <!--end row-->
        </div>
        <!--end container-->
    </div>
    <!--end page-content-->
    <div th:replace="~{footer :: footerSection}"></div>
    <!--end page-footer-->
</div>
<!--end page-wrapper-->
<a href="#page-header" class="to-top scroll" data-show-after-scroll="600"><i class="arrow_up"></i></a>
<!--<div class="message-popup bottom-left" data-show-after-time="2000" data-close-after-time="5000">-->
<!--    <div class="close"><i class="fa fa-times"></i></div>-->
<!--    <p></p>-->
<!--</div>-->
<!--<div class="message-popup bottom-left featured" data-show-after-time="4000" data-close-after-time="5000">-->
<!--    <div class="close"><i class="fa fa-times"></i></div>-->
<!--    <div class="title">Just Booked!</div>-->
<!--    <p></p>-->
<!--</div>-->
<!--<div class="message-popup bottom-left" data-show-after-time="5000" data-close-after-time="5000">-->
<!--    <div class="close"><i class="fa fa-times"></i></div>-->
<!--    <p>Last booking was from <strong>France</strong></p>-->
<!--</div>-->
<script type="text/javascript" src="assets/js/jquery-2.2.1.min.js"></script>
<script type="text/javascript" src="assets/js/jquery-migrate-1.2.1.min.js"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js"></script>
<script type="text/javascript" src="assets/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.validate.min.js"></script>
<script type="text/javascript" src="assets/js/bootstrap-datepicker.js"></script>
<script type="text/javascript" src="assets/js/icheck.min.js"></script>
<script type="text/javascript" src="assets/js/markerwithlabel_packed.js"></script>
<script type="text/javascript" src="assets/js/owl.carousel.js"></script>
<script type="text/javascript" src="assets/js/masonry.pkgd.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.simpleWeather.min.js"></script>
<!--<script type="text/javascript" src="/assets/js/maps.js"></script>-->
<script type="text/javascript" src="assets/js/custom.js"></script>
<script>
    var _latitude = 48.47292127;
    var _longitude = 4.28672791;
    var element = "map-item";
    simpleMap(_latitude,_longitude, element);
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Get initial rating from the input value or set default to 5 if it's 0
        initializeRating(1);
        initializeRating(2);
    });

    function initializeRating(index) {
        const initialRatingInput = document.getElementById("ratingInput" + index);
        let initialRating = initialRatingInput.value ? parseInt(initialRatingInput.value, 10) : 5;

        // If initial rating is 0, set it to 5
        if (initialRating === 0) {
            initialRating = 5;
            initialRatingInput.value = "5";
        }

        gfg(initialRating, index);
    }

    function updateRating(index, value) {
        // Convert input value to a number
        const rating = parseInt(value, 10);

        // Check if the value is a valid number between 1 and 5
        if (!isNaN(rating) && rating >= 1 && rating <= 5) {
            gfg(rating, index);
        } else {
            // If the input value is not valid, you can handle it here (e.g., display an error message)
        }
    }

    function gfg(n, index) {
        const stars = document.getElementsByClassName("star");
        const starIndex = index - 1;

        remove(stars, starIndex);

        for (let i = 0; i < n; i++) {
            let cls;
            if (n == 1) cls = "one";
            else if (n == 2) cls = "two";
            else if (n == 3) cls = "three";
            else if (n == 4) cls = "four";
            else if (n == 5) cls = "five";
            stars[starIndex * 5 + i].className = "star " + cls;
        }

        document.getElementById("ratingInput" + index).value = "" + n;
    }

    // To remove the pre-applied styling
    function remove(stars, starIndex) {
        for (let i = 0; i < 5; i++) {
            stars[starIndex * 5 + i].className = "star";
        }
    }


</script>

<script>
    function submitForm() {
        // Khi giá trị của dropdown thay đổi, tự động gửi form
        document.getElementById("filterForm").submit();
    }
</script>
<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // Get initial rating from the input value or set default to 5 if it's 0-->
<!--        const initialRatingInput = document.getElementById("ratingInput");-->
<!--        let initialRating = initialRatingInput.value ? parseInt(initialRatingInput.value, 10) : 5;-->

<!--        // If initial rating is 0, set it to 5-->
<!--        if (initialRating === 0) {-->
<!--            initialRating = 5;-->
<!--            initialRatingInput.value = "5";-->
<!--        }-->

<!--        gfg(initialRating);-->
<!--    });-->

<!--    function updateRating(value) {-->
<!--        // Convert input value to a number-->
<!--        const rating = parseInt(value, 10);-->

<!--        // Check if the value is a valid number between 1 and 5-->
<!--        if (!isNaN(rating) && rating >= 1 && rating <= 5) {-->
<!--            gfg(rating);-->
<!--        } else {-->
<!--            // If the input value is not valid, you can handle it here (e.g., display an error message)-->
<!--        }-->
<!--    }-->
<!--</script>-->
<!--<script>-->
<!--    // script.js-->

<!--    // To access the stars-->
<!--    let stars = document.getElementsByClassName("star");-->

<!--    // Function to update rating-->
<!--    function gfg(n) {-->
<!--        remove();-->

<!--        for (let i = 0; i < n; i++) {-->
<!--            let cls;-->
<!--            if (n == 1) cls = "one";-->
<!--            else if (n == 2) cls = "two";-->
<!--            else if (n == 3) cls = "three";-->
<!--            else if (n == 4) cls = "four";-->
<!--            else if (n == 5) cls = "five";-->
<!--            stars[i].className = "star " + cls;-->
<!--        }-->
<!--        document.getElementById("ratingInput").value = "" + n;-->
<!--    }-->

<!--    // To remove the pre-applied styling-->
<!--    function remove() {-->
<!--        for (let i = 0; i < 5; i++) {-->
<!--            stars[i].className = "star";-->
<!--        }-->
<!--    }-->
<!--</script>-->


<script th:src="@{'https://maps.googleapis.com/maps/api/js?key='+${key_map}+'&callback=initMap'}" async defer></script>

<script>
    var map;
    var marker;

    function initMap() {
        var latitude = parseFloat(document.getElementById('latitude').value);
        var longitude = parseFloat(document.getElementById('longitude').value);

        // Tạo map với vị trí ban đầu
        map = new google.maps.Map(document.getElementById('map-item'), {
            center: {lat: latitude, lng: longitude},
            zoom: 16
        });


        //marker ban dau
        marker = new google.maps.Marker({
            position: {lat: latitude, lng: longitude},
            map: map
        });


    }


</script>


</body>